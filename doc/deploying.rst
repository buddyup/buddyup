Register for a Heroku Account
=============================

Create an SSH key
=================

Run in a terminal::

    $ ssh-keygen -f ~/.ssh/id_rsa

Install Heroku Toolbelt
=======================

See: https://devcenter.heroku.com/articles/heroku-command

Follow the instructions for installing and logging in.

Setting Up An App
=================

Pick a name for the app (e.g. buddyup). The app will be accessible via
app-name.herokuapp.com. Run::

    $ cd <git repository>
    $ heroku create <app name>
    $ git push heroku master
    

Deploy Using Git
================

Run::

    $ cd <git repository>
    $ git push heroku master

This command will upload your repository to Heroku and create a "slug"
on Heroku's servers.

Add Heroku Postgres
===================

Provision Heroku's Postgres addon::

    $ cd <git repository>
    $ heroku addons:add heroku-postgresql:<postgres plan>

Where ``<postgres plan>`` is the name of your desired postgres plan.
Developers should use the ``dev`` plan. Pick from
https://addons.heroku.com/heroku-postgresql.

You will be assigned a database url named something like 
``HEROKU_POSTGRESQL_BLUE_URL``.
To find it, run::

    $ heroku config | grep HEROKU_POSTGRESQL

If multiple variables are present, you accidentally added multiple databases.
Then run::

    $ heroku pg:promote HEROKU_POSTGRESQL_BLUE_URL

Next create the database tables::

    $ heroku run init
    
To drop and recreate the tables, run::

    $ heroku run scripts/reset
    

Set Heroku variables
====================

BuddyUp must be configured through some environmental variables::

    $ heroku config:set BUDDYUP_TYPE=production

The current implementation only allows one admin. Set the admin user name to
a PSU user name, where ``psuuser`` is replaced by the user name::

    $ heroku config:set ADMIN_USER=psuuser

Cookies are protected by a secret key. By default, the key is just "foo", but
it should be set to a more secure value in production. A very safe key can be
generated by hitting random keys::

    $ heroku config:set SECRET_KEY=tVux6MEVRcaa8+ig5i5hFhm8nzubx9NuyrfIZug=

Populating Database
===================

There is a script, ``scripts/populate.py``, that inserts items from
``defaults/``. To insert all defaults, run::

    $ heroku run scripts/populate.py -v all

This inserts all default majors and locations. Course dump/load may be added
later.

Mail
====

Mail alerts are not implemented yet.

Amazon S3
=========

Amazon services have not been implemented yet

Initial Log In
==============

When you first log in, you are directed to /setup/profile. Manually go to
``/admin`` (as in http://buddyup.herokuapp.com/admin). Add all locations
and courses.